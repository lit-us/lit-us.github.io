<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
    <title>计算器</title>
    <script language="JavaScript">
    <!--
    function calculate(){
        // 原始DOM访问方式
        var formula = document.forms.calcform.formula.value;
        
        // 基础符号替换
        var expr = formula
            .replace(/\^/g, ',')          // 将2^3转换为pow(2,3)
            .replace(/pow\(/g, 'Math.pow(')
            .replace(/sqrt/g, 'Math.sqrt')
            .replace(/sin/g, 'Math.sin')
            .replace(/pi/g, 'Math.PI');
        
        // 直接显示结果
        try {
            var result = eval(expr);
            document.forms.calcform.result.value = result;
        } catch(e){
            alert("错误: " + e.message);
        }
        return false;
    }
    //-->
    </script>
</head>
<body>
    <form name="calcform" onsubmit="return calculate()">
        <input type="text" name="formula" size="20">
        <input type="submit" value="计算">
        <br>
        结果：<input type="text" name="result" readonly>
    </form>

    <p>输入示例：</p>
    <pre>
    Math.sqrt(9)
    3+5*2
    Math.pow(2,3)
    Math.sin(Math.PI)
    </pre>
</body>
</html>
